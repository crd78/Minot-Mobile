<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiApp1.ListLivraison"
             BackgroundColor="#F8F9FA">

    <Grid RowDefinitions="Auto,Auto,Auto,*" Padding="0">
        <!-- Header -->
        <Frame Grid.Row="0" 
               BackgroundColor="#63518A" 
               
               Padding="20,40,20,20" 
               CornerRadius="0"
               HasShadow="True"
               Margin="0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="40"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="40"/>
                </Grid.ColumnDefinitions>

                <Image Source="menu.png" 
                       HeightRequest="24" 
                       WidthRequest="24" 
                       VerticalOptions="Center" 
                       HorizontalOptions="Center"/>

                <Label Grid.Column="1" 
                       Text="Minot'Scan" 
                       FontSize="22" 
                       FontAttributes="Bold" 
                       HorizontalOptions="Center" 
                       VerticalOptions="Center" 
                       TextColor="White"/>

                <Image Grid.Column="2"
                       Source="user.png" 
                       HeightRequest="24" 
                       WidthRequest="24" 
                       VerticalOptions="Center" 
                       HorizontalOptions="Center"/>
            </Grid>
        </Frame>

        <!-- Bouton Nouvelle Livraison -->
        <!-- Bouton Nouvelle Livraison -->
        <Button Grid.Row="1"
            Text="+ Nouvelle Livraison"
            BackgroundColor="#63518A"
            TextColor="White"
            FontAttributes="Bold"
            FontSize="16"
            CornerRadius="25"
            HeightRequest="50"
            WidthRequest="280"
            HorizontalOptions="Center"
            Margin="20,30,20,20"
            Clicked="OnAddClicked"/>

        <!-- Titre section -->
        <Label Grid.Row="2"
               Text="Livraisons Précédentes"
               FontSize="20"
               FontAttributes="Bold"
               TextColor="#2C3E50"
               Margin="20,10,20,15"/>

        <!-- Liste des livraisons -->
        <CollectionView Grid.Row="3"
                        ItemsSource="{Binding Livraisons}"
                        Margin="20,0,20,20">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="0" Margin="0,0,0,15">
                        <Frame BackgroundColor="White" 
                               CornerRadius="12"
                               HasShadow="True"
                               Padding="15">
                            <Grid HeightRequest="90">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="50"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Avatar -->
                                <Frame Grid.Column="0"
                                       BackgroundColor="#E3D6F7"
                                       CornerRadius="20"
                                       HeightRequest="40"
                                       WidthRequest="40"
                                       VerticalOptions="Center"
                                       HorizontalOptions="Center"
                                       Padding="0"
                                       HasShadow="False">
                                    <Label Text="{Binding Initiales}" 
                                           FontSize="16" 
                                           FontAttributes="Bold" 
                                           HorizontalOptions="Center" 
                                           VerticalOptions="Center" 
                                           TextColor="#63518A"/>
                                </Frame>

                                <!-- Infos livraison -->
                                <StackLayout Grid.Column="1" 
                                           Padding="15,0,0,0" 
                                           Spacing="5"
                                           VerticalOptions="Center">
                                    <Label Text="{Binding Numero}" 
                                           FontSize="16" 
                                           FontAttributes="Bold" 
                                           TextColor="#2C3E50"/>
                                    <Label Text="{Binding Entreprise}" 
                                           FontSize="13" 
                                           TextColor="#7F8C8D"/>

                                    <!-- Statut -->
                                    <Frame Padding="8,4" 
                                           HasShadow="False" 
                                           BackgroundColor="{Binding StatutColor}"
                                           CornerRadius="10"
                                           HorizontalOptions="Start"
                                           Margin="0,5,0,0">
                                        <Label Text="{Binding StatutText}"
                                               TextColor="White"
                                               FontSize="11"
                                               FontAttributes="Bold"/>
                                    </Frame>
                                </StackLayout>

                                <!-- Actions -->
                                <Label Grid.Column="2" 
                                       Text="⋮" 
                                       FontSize="18" 
                                       TextColor="#7F8C8D"
                                       VerticalOptions="Center"
                                       HorizontalOptions="Center"/>
                            </Grid>
                        </Frame>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentPage>