<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiApp1.NouvelleLivraison"
             BackgroundColor="#F8F9FA">

    <Grid RowDefinitions="Auto,*,Auto" Padding="0">
        <!-- Header -->
        <Frame Grid.Row="0" 
               BackgroundColor="#63518A" 
               Padding="20,40,20,20" 
               CornerRadius="0"
               HasShadow="True"
               Margin="0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="40"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="40"/>
                </Grid.ColumnDefinitions>

                <ImageButton Source="back_arrow.png" 
                           HeightRequest="24" 
                           WidthRequest="24" 
                           BackgroundColor="Transparent"
                           VerticalOptions="Center" 
                           HorizontalOptions="Center"
                           Clicked="OnBackClicked"/>

                <Label Grid.Column="1" 
                       Text="Minot'Scan" 
                       FontSize="22" 
                       FontAttributes="Bold" 
                       HorizontalOptions="Center" 
                       VerticalOptions="Center" 
                       TextColor="White"/>

                <Image Grid.Column="2"
                       Source="user.png" 
                       HeightRequest="24" 
                       WidthRequest="24" 
                       VerticalOptions="Center" 
                       HorizontalOptions="Center"/>
            </Grid>
        </Frame>

        <!-- Contenu principal -->
        <StackLayout Grid.Row="1" 
                     Padding="20" 
                     Spacing="30" 
                     VerticalOptions="Center">

            <!-- Zone d'affichage pour simuler la caméra -->
            <Frame BackgroundColor="Black"
                   CornerRadius="15"
                   HasShadow="True"
                   Padding="20"
                   HeightRequest="320"
                   WidthRequest="320"
                   HorizontalOptions="Center">
                <StackLayout VerticalOptions="Center" HorizontalOptions="Center">
                    <Label Text="📱" 
                           FontSize="80" 
                           HorizontalOptions="Center"
                           TextColor="White"/>
                    <Label Text="Appuyez pour scanner" 
                           FontSize="16" 
                           TextColor="White"
                           HorizontalOptions="Center"
                           Margin="0,20,0,0"/>
                </StackLayout>
            </Frame>

            <!-- Instructions -->
            <Label Text="Assurez-vous que le QR code soit dans le champ et bien visible."
                   FontSize="16"
                   TextColor="#2C3E50"
                   HorizontalTextAlignment="Center"
                   HorizontalOptions="Center"/>

            <!-- Résultat du scan -->
            <Frame x:Name="ResultFrame"
                   BackgroundColor="White"
                   CornerRadius="10"
                   Padding="15"
                   IsVisible="False"
                   HasShadow="True">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Code scanné :"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="#63518A"/>
                    <Label x:Name="ResultLabel"
                           FontSize="14"
                           TextColor="#2C3E50"
                           HorizontalTextAlignment="Center"/>
                </VerticalStackLayout>
            </Frame>
        </StackLayout>

        <!-- Boutons d'action -->
        <StackLayout Grid.Row="2" 
                     Orientation="Horizontal" 
                     Spacing="15" 
                     Padding="20"
                     HorizontalOptions="Center">

            <Button Text="Recommencer"
                    BackgroundColor="#95A5A6"
                    TextColor="White"
                    FontAttributes="Bold"
                    CornerRadius="25"
                    HeightRequest="50"
                    WidthRequest="140"
                    Clicked="OnRestartClicked"/>

            <Button Text="Valider"
                    BackgroundColor="#63518A"
                    TextColor="White"
                    FontAttributes="Bold"
                    CornerRadius="25"
                    HeightRequest="50"
                    WidthRequest="140"
                    Clicked="OnValidateClicked"
                    IsEnabled="False"
                    x:Name="ValidateButton"/>
        </StackLayout>
    </Grid>
</ContentPage>